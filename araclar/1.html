<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>ulkem</title>
    <style>
        body { font-family: sans-serif; background: #0c75df; display: flex; justify-content: center; padding: 20px; }
        .box { max-width: 800px; width:100%; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .v-wrap { position: relative; padding-bottom: 56.25%; height: 0; background: #000; border-radius: 8px; overflow: hidden; }
        .v-wrap iframe { position: absolute; top:0; left:0; width:100%; height:100%; }
        #overlay { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); display:none; flex-direction: column; align-items:center; justify-content:center; color:white; padding: 20px; text-align: center; z-index:99; }
        button { background: #6b67bc; color:white; border:none; padding:12px 25px; border-radius: 8px; cursor:pointer; margin: 5px; font-weight: bold; }
        .progress { margin-top: 20px; background: #eee; height: 12px; border-radius: 6px; position: relative; }
        #fill { background: #6b67bc; height:100%; width:0%; border-radius: 6px; transition: 0.3s; }
    </style>
</head>
<body>
    <div class="box">
        <h2 style="margin-top:0">ulkem</h2>
        <div class="v-wrap">
            <div id="player"></div>
            <div id="overlay">
                <h3 id="q-txt"></h3>
                <div id="opts"></div>
            </div>
        </div>
        <div class="progress"><div id="fill"></div></div>
        <p><b>Puan:</b> <span id="score">0</span> / 2</p>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        const qs = [{"time":10,"text":"111","type":"multiple","options":["gg","gg"],"correct":0},{"time":17,"text":"111","type":"multiple","options":["gg","gg"],"correct":0}];
        let p, score = 0, answered = new Set();

        function onYouTubeIframeAPIReady() {
            p = new YT.Player('player', {
                videoId: 'dj40L4Tdxb8',
                events: { 'onStateChange': (e) => { if(e.data == 1) track(); } }
            });
        }

        function track() {
            const timer = setInterval(() => {
                if(p.getPlayerState() !== 1) { clearInterval(timer); return; }
                const now = Math.floor(p.getCurrentTime());
                const q = qs.find(x => x.time === now && !answered.has(now));
                if(q) { clearInterval(timer); show(q); }
            }, 1000);
        }

        function show(q) {
            p.pauseVideo();
            const ov = document.getElementById('overlay');
            ov.style.display = 'flex';
            document.getElementById('q-txt').innerText = q.text;
            const optDiv = document.getElementById('opts');
            optDiv.innerHTML = '';

            if(q.type === 'multiple') {
                q.options.forEach((o, i) => {
                    const b = document.createElement('button');
                    b.innerText = o;
                    b.onclick = () => {
                        if(i === q.correct) { score++; alert('Doğru!'); }
                        else { alert('Yanlış! Doğru: ' + q.options[q.correct]); }
                        done(q.time);
                    };
                    optDiv.appendChild(b);
                });
            } else {
                const b = document.createElement('button');
                b.innerText = 'Okudum, Devam Et';
                b.onclick = () => done(q.time);
                optDiv.appendChild(b);
            }
        }

        function done(t) {
            answered.add(t);
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('score').innerText = score;
            document.getElementById('fill').style.width = (answered.size / 2 * 100) + '%';
            p.playVideo();
            track();
        }
    </script>
</body>
</html>